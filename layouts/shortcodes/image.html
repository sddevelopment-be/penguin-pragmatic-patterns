{{ $src := .Get "src" }}
{{ $alt := .Get "alt" }}
{{ $caption := .Get "caption" }}
{{ $scale := .Get "size" }}
{{ $allign := .Get "float" }}

{{ if not $allign }}
    {{ $allign = "center" }}
{{ end }}

{{ if $caption }}
<div class="img-gallery {{ $allign }}" {{ if $scale }}style="max-width: {{ $scale }}; "{{ end}}>
    <figure>
        <a class="search-icon" target="_blank" href="{{ $src }}" title="{{ $alt }}">
            <picture>
                <source srcset="{{ $src }}" type="image/png" />
                <img src="{{ $src }}" type="image/png" alt="{{ $alt }}" decoding="async" />
            </picture>
        </a>
        <figcaption>{{ $caption }}</figcaption>
    </figure>
</div>
{{ else }}
<div class="text_image {{ $allign }}" {{if $scale}}style="max-width: {{ $scale }}; "{{ end}}>
    <a class="search-icon" target="_blank" href="{{ $src }}" title="{{ $alt }}">
        <picture>
            <source srcset="{{ $src }}" type="image/png"/>
            <img src="{{ $src }}" type="image/png" alt="{{ $alt }}" decoding="async"/>
        </picture>
    </a>
</div>
{{ end }}
